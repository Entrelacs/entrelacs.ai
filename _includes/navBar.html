<nav class="navbar">
  <div class="nav_container">
    <a href="/" class="logo">
      <img src="/images/logo.png" alt="">
      Entrelacs
    </a>

    <div class="hamburger" id="hamburger">
      <span></span>
      <span></span>
      <span></span>
    </div>

    <ul class="navLinks">
      <li><a href="/">Home</a></li>
      <li><a href="/employers">Employers</a></li>
      <li><a href="/healthcare">Healthcare</a></li>
      <li><a href="/technology">Technology</a></li>
      <li><a href="/about">About Us</a></li>
    </ul>
    <ul class="navLinks">
      <li><a class="cta" href="/contact-us/">Contact Us</a></li>
      <li>
        <div class="languageSwitcher">
          <div class="langFlag">
            <img src="{{ site.data.flags.English.flag }}" alt="">

          </div>
          <div class="langDropdown">
            <div class="langDropdownitem">
              <img src="{{ site.data.flags.English.flag }}" alt="">
              <p>English</p>
            </div>
            <div class="langDropdownitem">
              <img src="{{ site.data.flags.French.flag }}" alt="">
              <p>French</p>
            </div>
          </div>

        </div>
      </li>
    </ul>

    <div class="mobileMenu" id="mobileMenu" style="display: none;">
      <ul>
        <li><a href="/">Home</a></li>
        <li><a href="/employers">Employers</a></li>
        <li><a href="/healthcare">Healthcare</a></li>
        <li><a href="/technology">Technology</a></li>
        <li><a href="/about">About Us</a></li>
        <li><a class="cta" href="/contact-us">Contact us</a></li>
        <!-- <li ><a class="cta" href="https://app.entrelacs.ai">Take Assessment</a></li> -->
      </ul>
    </div>
  </div>
</nav>

<script>
  const hamburger = document.getElementById('hamburger');
  const mobileMenu = document.getElementById('mobileMenu');
  let menuOpen = false;

  hamburger.addEventListener('click', () => {
    menuOpen = !menuOpen;

    // Toggle mobile menu display
    mobileMenu.style.display = menuOpen ? 'block' : 'none';

    // Animate hamburger spans
    const spans = hamburger.querySelectorAll('span');
    spans[0].style.transform = menuOpen ? 'rotate(45deg) translate(5px, 6px)' : 'none';
    spans[1].style.opacity = menuOpen ? 0 : 1;
    spans[2].style.transform = menuOpen ? 'rotate(-45deg) translate(5px, -7px)' : 'none';
  });

  // Optional: close menu when mobile links are clicked
  mobileMenu.querySelectorAll('a').forEach(link => {
    link.addEventListener('click', () => {
      menuOpen = false;
      mobileMenu.style.display = 'none';
      const spans = hamburger.querySelectorAll('span');
      spans[0].style.transform = 'none';
      spans[1].style.opacity = 1;
      spans[2].style.transform = 'none';
    });
  });

  // Mark Nav item as active if the url matches it
  function setActiveNav() {
    const currentPath = window.location.pathname.replace(/\/$/, "");

    document.querySelectorAll(".navLinks a").forEach(link => {
      let linkPath = link.getAttribute("href").replace(/\/$/, "");

      // Special case for root
      if (linkPath === "") linkPath = "/";

      if (linkPath === "/" && currentPath !== "/") {
        // Don't mark root as active on other paths
        return;
      }

      if (
        currentPath === linkPath ||
        (linkPath !== "/" && currentPath.startsWith(linkPath + "/"))
      ) {
        link.classList.add("navactive");
      } else {
        link.classList.remove("navactive");
      }
    });
  }
  setActiveNav()
</script>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    const languageSwitcher = document.querySelector('.languageSwitcher');
    if (!languageSwitcher) return;

    const langFlag = languageSwitcher.querySelector('.langFlag img');
    const langDropdown = languageSwitcher.querySelector('.langDropdown');
    const langItems = langDropdown.querySelectorAll('.langDropdownitem');

    const SOURCE_LANG = 'en';
    const langCodes = ['en', 'fr', 'es'];

    // ---- CORE TRANSLATION LOGIC (WIDGET CONTROL) ----
    function translateTo(langCode) {
    }

    function setLanguage(index) {
      const item = langItems[index];
      const langCode = langCodes[index];
      if (!item || !langCode) return;

      // Update UI flag
      const itemImg = item.querySelector('img');
      if (itemImg) langFlag.src = itemImg.src;

      // Execute Translation
      translateTo(langCode);

      // Save for next visit
      localStorage.setItem('selectedLanguage', langCode);
      langDropdown.style.display = 'none';
    }

    // Restore saved language on load
    const savedLang = localStorage.getItem('selectedLanguage');
    if (savedLang && savedLang !== SOURCE_LANG) {
      const index = langCodes.indexOf(savedLang);
      if (index !== -1) {
        // Small delay to let Google Translate finish initialization
        setTimeout(() => setLanguage(index), 1000);
      }
    }

    // UI Handlers (Dropdown open/close)
    langFlag.parentElement.addEventListener('click', (e) => {
      e.stopPropagation();
      langDropdown.style.display =
        langDropdown.style.display === 'block' ? 'none' : 'block';
    });

    document.addEventListener('click', (e) => {
      if (!languageSwitcher.contains(e.target)) {
        langDropdown.style.display = 'none';
      }
    });

    langItems.forEach((item, index) => {
      item.addEventListener('click', () => setLanguage(index));
    });
  });
</script>